<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>INSPINIA | Empty Page</title>

		<link href="../static/css/bootstrap.min.css" rel="stylesheet">
		<link href="../static/font-awesome/css/font-awesome.css" rel="stylesheet">
		<link href="../static/css/plugins/dataTables/datatables.min.css" rel="stylesheet">
		<link href="../static/css/animate.css" rel="stylesheet">
		<link href="../static/css/style.css" rel="stylesheet">
    
	</head>

	<body>
		<div id="wrapper">
			<nav class="navbar-default navbar-static-side" role="navigation">
				<div class="sidebar-collapse">
					<a class="close-canvas-menu"><i class="fa fa-times"></i></a>
					<!--右侧菜单开始-->
					<%@include file="../inc/menu.jsp" %>
					<!--右侧菜单开结束-->
				</div>
			</nav>

			<div id="page-wrapper" class="gray-bg">
				<div class="row border-bottom">
					<!--上侧导航条开始-->
					<%@include file="../inc/header.jsp" %>
					<!--上侧导航条结束-->
				</div>
				<div class="row wrapper border-bottom white-bg page-heading">
					<div class="col-sm-4">
						<h2>DHC工资管理系统</h2>
						<ol class="breadcrumb">
							<li>
								<a href="../main.html">Home</a>
							</li>
							<li class="active">
								<a href="fixed_salary_management_select.html"><strong>工资项目管理</strong></a>
							</li>
						</ol>
					</div>
				</div>

				<div class="wrapper wrapper-content  animated fadeInRight article">
					<div class="row">
						<div class="col-lg-10 col-lg-offset-1">
							<div class="ibox">
								<div class="row">
									<div class="col-lg-12">
										<div class="ibox float-e-margins">
											<div class="ibox-title">
												<br />
												<h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XXX部门|员工固定工资表：</h3>
												<div class="ibox-tools">
													<a class="collapse-link">
														<i class="fa fa-chevron-up"></i>
													</a>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-12">
													<div class="ibox float-e-margins">
														<div class="ibox-content">
															<div class="table-responsive">
			<table class="table table-striped table-bordered table-hover dataTables-example">
				<thead>
					<tr>
						<th>选中</th>
						<th>员工编号</th>
						<th>员工姓名</th>
						<th>部门名称</th>
						<!--固定工资项目列  到时候考虑使用foreach看看能不能实现动态列插入显示-->
						<c:forEach items="${requestScope.pojsList }" var="pojs">
							<%-- <c:forEach items="${requestScope.fsList }" var="fs"> --%>
								<c:if test="${pojs.projectType == 1}">
									<th>${pojs.projectName }</th>
								</c:if>
							<%-- </c:forEach> --%>
						</c:forEach>
						
						<!--固定工资项目列  到时候考虑使用foreach看看能不能实现动态列插入显示-->
						<th>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							修改
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							详情
						</th>
					</tr>
				</thead>
				<tbody>
					<c:if test="${empty requestScope.fsList }">
						<script type="text/javascript">
							window.alert("无查询结果！")
				    	</script>
					</c:if>
						<c:forEach items="${requestScope.empList }" var="emp" varStatus="ind">
							<c:if test="${emp.departmentId == deptid}"> 
								<tr>
								<!-- 第一列 --><!-- 输出复选框 -->
									<td>
										<input type="checkbox" value="" name="checkbox" id="checkbox"/>
									</td>
								<!-- 第二列 --><!-- 输出员工编号 -->
									<c:forEach items="${requestScope.fsList }" var="fs" end="${exitId}">
										<td>${emp.employeeId }</td>
										<c:set var="exitId" value="0"></c:set>
									</c:forEach>
								<!-- 第三列 --><!-- 输出员工姓名 -->
									<c:forEach items="${requestScope.fsList }" var="fs" end="${exitId}">
										<td>${emp.employeeName }</td>
										<c:set var="exitId" value="0"></c:set>
									</c:forEach>
								<!-- 第四列 --><!-- 输出部门名称 -->
									<c:forEach items="${requestScope.deptList }" var="dept" end="${exitId}">
										<c:if test="${dept.departmentId == deptid}">
											<td>${dept.departmentName }</td>
											<c:set var="exitId" value="0"></c:set>
										</c:if>
									</c:forEach>
								<!-- 第五列 --><!-- 输出对应项目的数值 -->
									<c:forEach items="${requestScope.pojsList }" var="pojs">
										<%-- <c:set var="totalCount" value="0"></c:set> --%>
										<c:if test="${pojs.projectType == 1}">
											<c:forEach items="${requestScope.fsList }" var="fs">
												<c:if test="${fs.employeeId == emp.employeeId}">
													<c:if test="${pojs.projectId == fs.projectId}">
														<td>${fs.salary }</td>
														<%-- <c:set var="totalCount" value="1"></c:set> --%>
													</c:if>
												</c:if>	
											</c:forEach>
											<%-- <c:if test="${totalCount == 0}">
												<td>0</td>
											</c:if> --%>
										</c:if>
									</c:forEach>
								<!-- 第七列 -->
									<td>
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
										<a href="fixed_salary_management_update.html"><i class="fa fa-pencil"></i></a>
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
										<a href="fixed_salary_management_detail.html"><i class="fa fa-list-ul"></i></a>
									</td>
								</tr>
							</c:if>
						</c:forEach>
				</tbody>
			</table>
															<label>全选</label>
															<button  type="button" name="selectAll" id="selectAll">
																<i class="fa fa-check-circle-o"></i>
															</button>
															<label>反选</label>
															<button  type="button" name="changeSelect" id="changeSelect">
																<i class="fa fa-check-circle"></i>
															</button>
															<label>全不选</label>
															<button  type="button" name="selectNot" id="selectNot">
																<i class="fa fa-circle-o"></i>
															</button>
															</div>
														</div>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-12">
													<div class="ibox float-e-margins">
														<div class="ibox-content">
															<h3>员工固定工资批量修改：</h3>
															<div class="ibox-content">
																<label class="col-sm-2 control-label">工资类型名称</label>
																<div class="col-sm-10">
																	<select class="form-control m-b" name="account">
																		<option value="1">标准工资</option>
																		<option value="2">服装费</option>
																		<option value="3">采暖费</option>
																		<option value="4">手机费</option>
																	</select>
																</div>
															</div>
															<div class="ibox-content">
																<label class="col-sm-2 control-label">统一设置金额</label>
																<div class="col-sm-10">
																	<input type="text" class="form-control" value="100">
																</div>
															</div>
															<div class="hr-line-dashed"></div>
															<div class="form-group">
																<div class="col-sm-2 col-sm-offset-2">
																	<button class="btn btn-primary" type="submit">提交</button>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!--底部显示-->
				<div class="footer">
					<div class="pull-right">
						<strong>大连华信培训中心定制二班</strong>第五组
					</div>
					<div>
						<strong>Web</strong> for DHC &copy; 2019-2020
					</div>
				</div>
			</div>
		</div>

			<!-- Mainly scripts -->
			<script src="../static/js/jquery-2.1.1.js"></script>
			<script src="../static/js/bootstrap.min.js"></script>
			<script src="../static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
			<script src="../static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
			<script src="../static/js/plugins/jeditable/jquery.jeditable.js"></script>
			<script src="../static/js/plugins/dataTables/datatables.min.js"></script>
			<!-- Custom and plugin javascript -->
			<script src="../static/js/inspinia.js"></script>
			<script src="../static/js/plugins/pace/pace.min.js"></script>

    		
			<script language="JavaScript">
				$(function(){
					$("#go_submit").click(function (){
						location.href = 'fixed_salary_management_form.html#';
					})
				})
				$('body.canvas-menu .sidebar-collapse').slimScroll({
					height: '100%',
					railOpacity: 0.9
				});
				$(function() {
					$("#selectAll").click(function() {
/*						window.alert("test");*/
						o=document.getElementsByName("checkbox")
						for(i=0;i<o.length;i++){
							o[i].checked=true
						}
					});
					$("#changeSelect").click(function() {
						/*window.alert("test");*/
						o=document.getElementsByName("checkbox")
						for(i=0;i<o.length;i++){
							if(o[i].checked==false){
								o[i].checked=true
							}else{
								o[i].checked=false
							}
						}
					});
					$("#selectNot").click(function() {
/*						window.alert("test");*/
						o=document.getElementsByName("checkbox")
						for(i=0;i<o.length;i++){
							o[i].checked=false
						}
					});
				});
//				<!-- Page-Level Scripts -->
				$(document).ready(function(){
		            $('.dataTables-example').DataTable({
		                dom: '<"html5buttons"B>lTfgitp',
		                buttons: [
		                    {extend: 'copy'},
		                    {extend: 'csv'},
		                    {extend: 'excel', title: 'ExampleFile'},
		                    {extend: 'pdf', title: 'ExampleFile'},
		
		                    {extend: 'print',
		                     customize: function (win){
		                            $(win.document.body).addClass('white-bg');
		                            $(win.document.body).css('font-size', '10px');
		
		                            $(win.document.body).find('table')
		                                    .addClass('compact')
		                                    .css('font-size', 'inherit');
		                    }
		                    }
		                ]
		
		            });
		
		            /* Init DataTables */
		            var oTable = $('#editable').DataTable();
		
		            /* Apply the jEditable handlers to the table */
		            oTable.$('td').editable( '../example_ajax.php', {
		                "callback": function( sValue, y ) {
		                    var aPos = oTable.fnGetPosition( this );
		                    oTable.fnUpdate( sValue, aPos[0], aPos[1] );
		                },
		                "submitdata": function ( value, settings ) {
		                    return {
		                        "row_id": this.parentNode.getAttribute('id'),
		                        "column": oTable.fnGetPosition( this )[2]
		                    };
		                },
		
		                "width": "90%",
		                "height": "100%"
		            } );
		
		
		        });
		
		        function fnClickAddRow() {
		            $('#editable').dataTable().fnAddData( [
		                "Custom row",
		                "New row",
		                "New row",
		                "New row",
		                "New row" ] );
		
		        }
			</script>
			
	</body>

</html>